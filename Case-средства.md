## Практическое задание. Проектирование БД с помощью case-средств
---
Практическая сделана с кульковой, немного упрощена, чтобы была возможность уложится в две пары
---
### **1. Общее описание**  
Ресторан использует кассовую систему для автоматизации ключевых бизнес-процессов:  
- Управление заказами и бронированием столиков.  
- Контроль финансовых операций (касса, смены, инкассация).  
- Учет клиентов и персонала.  
- Управление меню и акциями.  
- Анализ себестоимости и прибыльности блюд.  

---

### **2. Основные пользователи системы и их роли**  

#### **2.1. Официант**  
- **Функции:**  
  - Создание заказов:  
    - Фиксация номера столика, даты и времени заказа.  
    - Выбор блюд/напитков из меню (с учетом акций).  
    - Указание комментариев к заказу (например, аллергии).  
  - Бронирование столиков:  
    - Ввод данных клиента (имя, номер телефона).  
    - Указание даты, времени, номера столика, количества персон.  
    - Уведомление клиента о подтверждении брони.  
  - Просмотр меню:  
    - Информация о блюдах (цена, состав, калорийность).  
    - Актуальные акции (например, "Скидка 20% на десерты в ноябре").  

#### **2.2. Администратор**  
- **Функции:**  
  - Все функции официанта.  
  - Управление сменами:  
    - Открытие/закрытие смены с фиксацией времени и ответственного лица.  
    - Формирование отчетов по выручке за смену.  
  - Финансовые операции:  
    - Внесение/изъятие наличных из кассы (например, для возвратов).  
    - Проведение инкассации (передача денег в банк).  
  - Работа с клиентской базой:  
    - Добавление/редактирование данных клиентов (имя, телефон, email).  
    - Просмотр истории посещений и заказов клиента.  

#### **2.3. Технический эксперт**  
- **Функции:**  
  - Полный доступ ко всем данным и настройкам системы.  
  - Устранение технических сбоев (например, восстановление данных).  
  - Резервное копирование базы данных.  
  - Интеграция системы с внешними сервисами (онлайн-бронирование, платежные системы).  

---

### **3. Бизнес-процессы**  

#### **3.1. Бронирование столика**  
1. Клиент звонит или оставляет заявку через официанта.  
2. Официант проверяет доступность столика на нужное время.  
3. Если столик свободен — вводит данные клиента, подтверждает бронь.  
4. Система отправляет клиенту SMS-уведомление с деталями брони.  

#### **3.2. Создание заказа**  
1. Официант выбирает столик и добавляет блюда из меню.  
2. Система автоматически применяет акционные цены (если акция активна).  
3. Заказ передается на кухню через интеграцию с кухонным дисплеем.  
4. После оплаты формируется чек с деталями заказа.  

#### **3.3. Управление сменами**  
1. Администратор открывает смену — система фиксирует начальную сумму в кассе.  
2. В течение смены все операции привязываются к текущей смене.  
3. При закрытии смены система генерирует отчет:  
   - Общая выручка.  
   - Количество заказов.  
   - Пополнения/изъятия из кассы.  

#### **3.4. Учет меню и акций**  
- Каждое блюдо имеет:  
  - Состав (ингредиенты для кухни и гостей с аллергиями).  
  - Пищевую ценность (калории, белки, жиры, углеводы).  
  - Себестоимость (затраты на ингредиенты).  
  - Наценку и финальную цену.  
- Месячные акции:  
  - Например, "Суп дня — 150 руб. вместо 250 руб. в ноябре".  
  - Акции привязаны к конкретным блюдам и периоду действия.  

---

**Практическое задание: Проектирование БД для кассовой системы ресторана**  

---

### **1. Основные задачи**  
1. **Спроектировать базу данных в MSSMS**  
   - Определить сущности, связи, атрибуты.  
   - Учесть предметную область: управление заказами, бронированием, кассой, меню, акциями.  

2. **Нормализовать БД до 3НФ**  
   - Устранить избыточность и аномалии.  
   - Обосновать выполнение каждой нормальной формы.  

3. **Заполнить таблицы тестовыми данными**  
   - Минимум **20 записей** в каждой таблице.  

4. **Создать SQL-скрипты** (15 скриптов, см. раздел 2).  

---

### **2. Требуемые SQL-скрипты**  
**Группа 1: Управление пользователями**  
1. **Добавление пользователей**  
   - Клиенты, официанты, администраторы (раздельные или общие таблицы).  
2. **Редактирование пользователей по ID**  
   - По одному скрипту для каждого типа пользователя (если в разных таблицах).  
   - Или один скрипт с условием `WHERE role = '...'` (если в одной таблице).  

**Группа 2: Работа с акциями**  
3. **Добавление сезонных акций** (название, период, скидка, блюда).  
4. **Вывод актуальных акций** (текущая дата в периоде действия).  

**Группа 3: Заказы и бронирование**  
5. **Добавление заказов**  
   - Связь с бронированием: если столик забронирован, заказ невозможен до подтверждения брони.  
6. **Создание бронирования**  
   - Проверка доступности столика на указанное время.  

**Группа 4: Финансовые операции**  
7. **Внесение денег в кассу** (сумма, дата, комментарий).  
8. **Изъятие денег из кассы** (сумма, дата, причина).  
9. **Открытие/закрытие смены**  
   - Фиксация времени, начального/конечного остатка кассы.  
10. **Сводная таблица результатов дня**  
    - Выручка, количество заказов, ответственный за смену.  
11. **Проведение инкассации** (изъятие денег с отметкой "инкассация").  

**Группа 5: Формирование чеков**  
12. **Чек с итоговой суммой** (с учетом скидок).  
13. **Детальный чек** (список позиций, цены, скидки).  

**Группа 6: Управление меню**  
14. **Добавление позиции в меню**  
    - Название, состав, калорийность, себестоимость, цена.  
15. **Получение меню**  
    - Весь список + фильтрация по категориям (например, "Напитки", "Десерты").  

---

### **3. Требования к сдаче**  
- **Скрипты:**  
  - **1 файл** с созданием БД в 3НФ.  
  - **1 файл** с заполнением таблиц (минимум 5 записей в каждой).  
  - **15 отдельных файлов** для каждого SQL-скрипта из раздела 2.  
  - Все файлы загрузить на [диск](https://drive.google.com/drive/folders/1euoNmNexsEnj1BP8Dcqw11B4aybGqcW_?usp=sharing) в папку с вашей **фамилией**.  

- **Отчет в PDF:**  
  - Демонстрация работоспособности **в порядке**:  
    1. Скрипты добавления данных.  
    2. Скрипты изменения данных.  
    3. Скрипты вывода данных.  
  - Примеры выполнения каждого скрипта с пояснениями.  

---

### **4. Дополнительное задание (для студентов с баллом ниже 4,8)**  
- Создать **2 триггера** на выбор (например: аудит изменений, проверка бронирования).  
- В отчете:  
  - Обосновать выбор триггеров.  
  - Описать их логику и сценарии срабатывания.  

---

**Критерии оценки:**  
- Корректность структуры БД (3НФ, связи, ключи).  
- Работоспособность скриптов (ошибки при выполнении = минус балл).  
- Полнота тестовых данных и отчета.  
- Качество документации (четкость, детализация).  


|                   Задание                    | Вес | Пояснение                            |
| :------------------------------------------: | --- | ------------------------------------ |
|                 Создание БД                  | 0,5 | 0 за ошибку                          |
|           Все сущности определены            | 1   | 0 за ошибку                          |
|                Соблюдена 3 нф                | 0,3 | -0,1 за нарушение каждой нф          |
|    Таблицы заполнены минимум 5 записями      | 1   | 0 за ошибку                          |
|               Записи осмыслены               | 1   | 0 за ошибку                          |
|     Сформированы все необходимые скрипты     | 4,5 | -0,3 за каждый не предоставленный    |
|    Отчёт представлен в требуемом формате     | 0,5 | -0,1 за ошибку (структура важна)     |
| Все скрипты представлены в требуемом формате | 0,5 | -0,1 за ошибку (нейминг тоже решает) |
|                    Итого                     | 9,3 |                                      |

| Процент выполненности | Оценка |
| :-------------------: | :----: |
|         *< 50%*         | **2**  |
|       *51% - 65%*       | **3**  |
|       *66% - 80%*       | **4**  |
|         *> 80%*         | **5**  |

**Срок сдачи:** 14.04.2025 
